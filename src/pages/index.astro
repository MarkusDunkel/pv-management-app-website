---
import MainLayout from '@/layouts/MainLayout.astro';
import SectionHeading from '@/components/SectionHeading.astro';
import { buttonVariants } from '@/components/ui/button';
import { cn } from '@/lib/utils';

const featureCards = [
  {
    title: 'Real-time Visualization',
    description:
      'Streaming dashboards render module-level performance in sub-second intervals so operators can intervene before yield drops.',
    image: '/images/feature-visualization.svg',
    alt: 'Line chart showing solar panel output trends.'
  },
  {
    title: 'Anomaly Detection',
    description:
      'ML-assisted baselines flag inverter faults, shading, and sudden voltage sag using adaptive thresholds tuned to each array.',
    image: '/images/feature-anomaly.svg',
    alt: 'Heatmap view highlighting an anomalous solar string.'
  },
  {
    title: 'Remote Monitoring',
    description:
      'Secure remote commands trigger diagnostics, calibrations, and firmware checks across distributed sites without truck rolls.',
    image: '/images/feature-remote.svg',
    alt: 'Engineer triggering a remote diagnostic routine.'
  },
  {
    title: 'Trend Analytics',
    description:
      'Rolling 30-day regressions surface performance drift and panel degradation to feed maintenance planning.',
    image: '/images/feature-trend.svg',
    alt: 'Dashboard presenting comparative production trends.'
  }
];

const challenges = [
  {
    title: 'Unifying Heterogeneous Telemetry',
    description:
      'Vendors expose metrics via Modbus, proprietary TCP payloads, and REST bridges. We normalise payloads into a shared time-series schema and reconcile missing datapoints with Kalman smoothing to keep dashboards coherent.',
    detail:
      'Edge collectors publish raw frames to a Kafka topic; a wasm-based parser hydrates them into structured JSON across 12 protocols.'
  },
  {
    title: 'Scaling Geospatial Queries',
    description:
      'Operators filter by irradiance, asset health, and location in milliseconds even with thousands of rooftops. We tile data using H3 indexes, shard queries per region, and cache map overlays in Cloud Storage.',
    detail:
      'Daily pre-computed tiles keep interactive latency under 250ms for 95th percentile requests.'
  },
  {
    title: 'Guarding Against False Positives',
    description:
      'Anomaly bursts can overwhelm teams. We calibrate detectors with seasonal baselines and apply quorum logic before paging, reducing noisy alerts by 63% without hiding real failures.',
    detail:
      'Alert policies blend statistical confidence and time-in-state windows to prioritise critical outages.'
  }
];

const developerLinks = [
  { href: 'https://github.com/example', label: 'GitHub', aria: 'Visit developer GitHub profile' },
  { href: 'https://www.linkedin.com/in/example', label: 'LinkedIn', aria: 'Visit developer LinkedIn profile' },
  { href: 'mailto:developer@example.com', label: 'Email', aria: 'Email the developer' }
];
---
<MainLayout>
  <SectionHeading
    id="about"
    label="Photovoltaik Surveillance and Analytics"
    eyebrow="About"
    description="Operational intelligence for distributed solar fleets—surface insights, visualise health, and automate remediation from a single control surface."
  >
    <div class="grid gap-12 lg:grid-cols-[1.1fr_0.9fr] lg:items-center">
      <div class="space-y-6">
        <p class="text-lg text-muted-foreground">
          Harness an observability layer purpose-built for photovoltaic assets. Spotlight underperforming strings, triage inverter faults instantly, and benchmark output against irradiance forecasts—all without stitching spreadsheets together.
        </p>
        <div class="flex flex-wrap items-center gap-4">
          <a
            href="#features"
            class={cn(buttonVariants({ variant: 'default', size: 'lg' }), 'shadow-xl shadow-accent/30')}
          >
            Try the Demo
          </a>
          <a
            href="#infrastructure"
            class={cn(buttonVariants({ variant: 'outline', size: 'lg' }), 'border-dashed')}
          >
            Explore Architecture
          </a>
        </div>
        <dl class="grid gap-6 sm:grid-cols-3">
          <div>
            <dt class="text-sm text-muted-foreground">Arrays Observed</dt>
            <dd class="text-2xl font-semibold">12,500+</dd>
          </div>
          <div>
            <dt class="text-sm text-muted-foreground">Alert Latency</dt>
            <dd class="text-2xl font-semibold">&lt; 30s</dd>
          </div>
          <div>
            <dt class="text-sm text-muted-foreground">Energy Managed</dt>
            <dd class="text-2xl font-semibold">4.2 GWp</dd>
          </div>
        </dl>
      </div>
      <figure class="relative">
        <img
          src="/images/hero-solar-array.svg"
          alt="Aerial illustration of solar arrays sending data to an analytics dashboard."
          class="w-full"
          loading="lazy"
        />
        <figcaption class="mt-3 text-xs text-muted-foreground">
          Illustrative overview tying live production data to actionable insights.
        </figcaption>
      </figure>
    </div>
  </SectionHeading>

  <SectionHeading
    id="features"
    label="Platform Features"
    eyebrow="Features"
    description="Everything operations teams need to sense, analyse, and respond to solar performance in one view."
  >
    <div class="grid gap-6 md:grid-cols-2">
      {featureCards.map((feature) => (
        <article class="flex flex-col gap-4 rounded-xl border border-border bg-background/80 p-6 shadow-card backdrop-blur">
          <img src={feature.image} alt={feature.alt} class="h-32 w-full object-cover" loading="lazy" />
          <div class="space-y-2">
            <h3 class="text-xl font-semibold">{feature.title}</h3>
            <p class="text-sm text-muted-foreground">{feature.description}</p>
          </div>
        </article>
      ))}
    </div>
  </SectionHeading>

  <SectionHeading
    id="infrastructure"
    label="Infrastructure"
    eyebrow="Infrastructure"
    description="A cloud-native control plane ingests telemetry, orchestrates analytics, and serves insights globally."
  >
    <div class="grid gap-8 lg:grid-cols-[1fr_1.2fr] lg:items-center">
      <figure class="order-last lg:order-first">
        <img
          src="/images/infra-diagram.svg"
          alt="Diagram showing collectors, streaming pipeline, analytics layer, and operator console."
          class="w-full"
          loading="lazy"
        />
        <figcaption class="mt-3 text-xs text-muted-foreground">
          Telemetry flows through resilient pipelines and lands in a scalable analytics fabric.
        </figcaption>
      </figure>
      <div class="space-y-5">
        <p class="text-base text-muted-foreground">
          Resilient edge collectors publish granular telemetry into regional ingestion clusters. A Kafka backbone replicates events into BigQuery for historical analysis while a Flink jobs layer powers live dashboards. Role-based APIs expose actions back to field teams through secure web and mobile clients.
        </p>
        <p class="text-base text-muted-foreground">
          Automated deploys on Google Cloud ensure consistent rollouts. GitOps pipelines verify infrastructure diagrams, schema migrations, and golden dashboards before shipping to production.
        </p>
        <a
          href="https://github.com/example/pv-analytics"
          class={cn(buttonVariants({ variant: 'outline' }), 'w-fit')}
        >
          View on GitHub
        </a>
      </div>
    </div>
  </SectionHeading>

  <SectionHeading
    id="challenges"
    label="Key Challenges"
    eyebrow="Key Challenges"
    description="Hard-won lessons from scaling a data-intensive solar monitoring platform."
  >
    <div class="space-y-8">
      {challenges.map((challenge) => (
        <article class="rounded-xl border border-border bg-background/70 p-6 shadow-card">
          <h3 class="text-2xl font-semibold">{challenge.title}</h3>
          <p class="mt-3 text-sm text-muted-foreground">{challenge.description}</p>
          <p class="mt-3 rounded-lg bg-muted/60 p-4 text-sm text-muted-foreground">
            {challenge.detail}
          </p>
        </article>
      ))}
    </div>
  </SectionHeading>

  <SectionHeading
    id="developer"
    label="About the Developer"
    eyebrow="Team"
    description="Crafted by a systems engineer focused on reliable renewables and intuitive operator tooling."
  >
    <div class="grid gap-8 md:grid-cols-[0.75fr_1.25fr] md:items-start">
      <img
        src="/images/developer-avatar.svg"
        alt="Illustrated portrait of the developer."
        class="mx-auto h-40 w-40 rounded-full border border-border bg-muted object-cover"
        loading="lazy"
      />
      <div class="space-y-4">
        <p class="text-base text-muted-foreground">
          Hey, I am Alex—a renewable tech specialist who pairs electrical engineering roots with cloud-native data stacks. I design control rooms that keep field teams confident, operators informed, and sustainability goals on track.
        </p>
        <p class="text-base text-muted-foreground">
          Recent projects span inverter fleet analytics, DER forecasting, and XR training overlays for rooftop crews. I love translating messy telemetry into decisive, human-friendly experiences.
        </p>
        <div class="flex flex-wrap gap-3">
          {developerLinks.map((link) => (
            <a
              href={link.href}
              rel="noreferrer"
              target={link.href.startsWith('http') ? '_blank' : undefined}
              aria-label={link.aria}
              class={cn(
                buttonVariants({ variant: 'ghost' }),
                'border border-border px-4 py-2 text-sm font-medium hover:border-accent'
              )}
            >
              {link.label}
            </a>
          ))}
        </div>
      </div>
    </div>
  </SectionHeading>
</MainLayout>
